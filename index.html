<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NEXA - Estado de Membresía</title>

<style>

/* ===============================
   RESET GENERAL
=================================*/

*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:Arial, Helvetica, sans-serif;
}

/* ===============================
   BODY
=================================*/

body{
  background:#0f172a;
  color:white;
  display:flex;
  flex-direction:column;
  min-height:100vh;
}

/* ===============================
   HEADER
=================================*/

header{
  background:#111827;
  padding:15px;
  border-bottom:2px solid #1f2937;
}

.header-container{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.logo{
  font-weight:bold;
  font-size:18px;
}

.colab{
  font-size:14px;
  opacity:0.7;
}

/* ===============================
   MAIN
=================================*/

main{
  flex:1;
  padding:20px;
  display:flex;
  flex-direction:column;
  align-items:center;
  text-align:center;
}

/* ===============================
   BADGE CÓDIGO
=================================*/

.badge{
  background:#1f2937;
  padding:10px 20px;
  border-radius:20px;
  margin-bottom:25px;
  font-size:14px;
}

/* ===============================
   STATUS BOX
=================================*/

.status-box{
  position:relative;
  margin-bottom:20px;
}

.status-box img{
  width:120px;
  height:120px;
}

/* ===============================
   TEXTO ESTADO
=================================*/

.status-text{
  font-size:22px;
  font-weight:bold;
  margin-top:15px;
}

.secondary-text{
  margin-top:10px;
  font-size:16px;
  opacity:0.8;
}

/* ===============================
   INFO EXTRA
=================================*/

.info{
  margin-top:15px;
  font-size:14px;
  opacity:0.8;
}

/* ===============================
   ADMIN PANEL
=================================*/

#adminPanel{
  margin-top:40px;
  padding:20px;
  border:1px solid #1f2937;
  border-radius:10px;
  width:100%;
  max-width:400px;
  background:#111827;
}

/* ===============================
   FOOTER
=================================*/

footer{
  padding:15px;
  text-align:center;
  font-size:12px;
  opacity:0.6;
  border-top:1px solid #1f2937;
}

/* ===============================
   RESPONSIVE
=================================*/

@media(max-width:480px){

  .status-box img{
    width:100px;
    height:100px;
  }

  .status-text{
    font-size:20px;
  }

}

</style>
</head>

<body>

<header>
  <div class="header-container">
    <div class="logo">NEXA SYSTEM</div>
    <div class="colab">Control de Membresía</div>
  </div>
</header>

<main>

  <div class="badge" id="badgeCodigo">
    Cargando código...
  </div>

  <div class="status-box">
    <img id="statusImage" src="" alt="estado">
  </div>

  <div class="status-text" id="estadoPrincipal"></div>

  <div class="secondary-text" id="estadoSecundario"></div>

  <div class="info">
    Mes actual: <span id="mesActual"></span>
  </div>

  <!-- =========================
       PANEL ADMINISTRADOR
  ==========================-->

  <div id="adminPanel" style="display:none;">

    <h3>Panel Administrativo</h3>

    <div class="info">
      Plan Base: <span id="totalBase"></span>
    </div>

    <div class="info">
      Plan Plus: <span id="totalPlus"></span>
    </div>

    <div class="info">
      Sin Pago: <span id="totalNoPago"></span>
    </div>

    <hr style="margin:15px 0; opacity:0.3;">

    <div class="info">
      Ingreso estimado mensual:
    </div>

    <div class="status-text" id="ingresoEstimado"></div>

  </div>

</main>

<footer>
  NEXA © 2026 - Sistema Interno de Control
</footer>

<script>

/* =========================================
   BASE DE DATOS SIMPLE
=========================================*/

const alumnos = {
  "NEXA-001-CFPM": "plus",
  "NEXA-002-CFPM": "base",
  "NEXA-003-CFPM": "nopago"
};

/* =========================================
   OBTENER PARÁMETROS URL
=========================================*/

const params = new URLSearchParams(window.location.search);
const codigo = params.get("codigo");
const esAdmin = params.get("admin") === "true";

/* =========================================
   REFERENCIAS DOM
=========================================*/

const badge = document.getElementById("badgeCodigo");
const estadoPrincipal = document.getElementById("estadoPrincipal");
const estadoSecundario = document.getElementById("estadoSecundario");
const imagen = document.getElementById("statusImage");
const mesActual = document.getElementById("mesActual");

/* =========================================
   MOSTRAR MES
=========================================*/

const fecha = new Date();
const opciones = { month: 'long', year: 'numeric' };
mesActual.textContent = fecha.toLocaleDateString('es-ES', opciones);

/* =========================================
   VALIDAR CÓDIGO
=========================================*/

if (!codigo || !alumnos[codigo]) {

  badge.textContent = "Código inválido";
  estadoPrincipal.textContent = "CÓDIGO INVÁLIDO";
  estadoSecundario.textContent = "No registrado";
  imagen.src = "img/cross.png";

} else {

  badge.textContent = codigo;

  const estado = alumnos[codigo];

  if (estado === "plus") {

    estadoPrincipal.textContent = "PAGO REGISTRADO";
    estadoSecundario.textContent = "PLAN PLUS ACTIVO";
    imagen.src = "img/check-dorado.png";

  }

  if (estado === "base") {

    estadoPrincipal.textContent = "PAGO REGISTRADO";
    estadoSecundario.textContent = "PLAN BASE ACTIVO";
    imagen.src = "img/check.png";

  }

  if (estado === "nopago") {

    estadoPrincipal.textContent = "SIN PAGO";
    estadoSecundario.textContent = "MEMBRESÍA INACTIVA";
    imagen.src = "img/cross.png";

  }

}

/* =========================================
   PANEL ADMIN
=========================================*/

if (esAdmin) {

  document.getElementById("adminPanel").style.display = "block";

  let totalBase = 0;
  let totalPlus = 0;
  let totalNoPago = 0;

  for (let clave in alumnos) {

    if (alumnos[clave] === "base") totalBase++;
    if (alumnos[clave] === "plus") totalPlus++;
    if (alumnos[clave] === "nopago") totalNoPago++;

  }

  document.getElementById("totalBase").textContent = totalBase;
  document.getElementById("totalPlus").textContent = totalPlus;
  document.getElementById("totalNoPago").textContent = totalNoPago;

  const precioBase = 3000;
  const precioPlus = 5000;

  const ingreso = (totalBase * precioBase) + (totalPlus * precioPlus);

  document.getElementById("ingresoEstimado").textContent = "$" + ingreso;

}

</script>

</body>
</html>
